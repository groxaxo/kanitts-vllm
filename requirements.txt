# Core dependencies for KaniTTS-vLLM
# Optimized for multiple performance modes: Low VRAM, Balanced, High Performance, and 4-bit Quantization
#
# PYTHON VERSION REQUIREMENT: This project requires Python 3.10, 3.11, or 3.12
# Python 3.13+ is NOT supported due to numpy version conflicts:
#   - nemo-toolkit requires numpy<2.0.0
#   - ml-dtypes>=0.5.0 requires numpy>=2.1.0 on Python 3.13+
# These requirements are incompatible. Use Python 3.10-3.12 instead.

# IMPORTANT: Install transformers first to prevent version conflicts
# Transformers for model compatibility (must be installed before nemo-toolkit and vllm)
transformers==4.53.2

# PyTorch ecosystem
torch>=2.1.0
numpy>=1.24.0,<2.0.0
scipy>=1.11.0

# ml_dtypes: Required by onnx>=1.17.0 for float4_e2m1fn type support
# Must be >=0.5.0 to avoid AttributeError with onnx 1.19.0
# Note: ml-dtypes 0.5.0+ requires numpy>=2.1.0 on Python 3.13+, which conflicts with nemo-toolkit
# This project requires Python 3.10-3.12 to avoid this conflict
ml_dtypes>=0.5.0; python_version<'3.13'

# BitsAndBytes for 4-bit quantization (required by nemo-toolkit)
bitsandbytes==0.46.0

# FastAPI and web server
fastapi>=0.104.0
uvicorn[standard]>=0.24.0

# Audio processing (requires transformers~=4.53.0)
nemo-toolkit[tts]==2.5.3

# vLLM for optimized inference (requires transformers>=4.53.2, uses outlines-core==0.2.10 directly)
vllm==0.10.0

# Additional utilities
pydantic>=2.0.0

# Language detection
langdetect>=1.0.9

# System dependencies (install via package manager):
# - ffmpeg (required by nemo-toolkit)
#   Ubuntu/Debian: sudo apt install ffmpeg
#   CentOS/RHEL: sudo yum install ffmpeg
